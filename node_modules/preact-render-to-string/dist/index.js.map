{"version":3,"file":null,"sources":["../src/util.js","../src/index.js"],"sourcesContent":["// DOM properties that should NOT have \"px\" added when numeric\nexport const NON_DIMENSION_PROPS = {\n\tboxFlex:1, boxFlexGroup:1, columnCount:1, fillOpacity:1, flex:1, flexGrow:1,\n\tflexPositive:1, flexShrink:1, flexNegative:1, fontWeight:1, lineClamp:1, lineHeight:1,\n\topacity:1, order:1, orphans:1, strokeOpacity:1, widows:1, zIndex:1, zoom:1\n};\n\nconst ESC = {\n\t'<': '&lt;',\n\t'>': '&gt;',\n\t'\"': '&quot;',\n\t'&': '&amp;'\n};\n\nexport const objectKeys = Object.keys || (obj => {\n\tlet keys = [];\n\tfor (let i in obj) if (obj.hasOwnProperty(i)) keys.push(i);\n\treturn keys;\n});\n\nexport let encodeEntities = s => String(s).replace(/[<>\"&]/g, escapeChar);\n\nlet escapeChar = a => ESC[a] || a;\n\nexport let falsey = v => v==null || v===false;\n\nexport let memoize = (fn, mem={}) => v => mem[v] || (mem[v] = fn(v));\n\nexport let indent = (s, char) => String(s).replace(/(\\n+)/g, '$1' + (char || '\\t'));\n\nexport let isLargeString = (s, length, ignoreLines) => (String(s).length>(length || 40) || (!ignoreLines && String(s).indexOf('\\n')!==-1) || String(s).indexOf('<')!==-1);\n\n// Convert an Object style to a CSSText string\nexport function styleObjToCss(s) {\n\tlet str = '';\n\tfor (let prop in s) {\n\t\tlet val = s[prop];\n\t\tif (val!=null) {\n\t\t\tif (str) str += ' ';\n\t\t\tstr += jsToCss(prop);\n\t\t\tstr += ': ';\n\t\t\tstr += val;\n\t\t\tif (typeof val==='number' && !NON_DIMENSION_PROPS[prop]) {\n\t\t\t\tstr += 'px';\n\t\t\t}\n\t\t\tstr += ';';\n\t\t}\n\t}\n\treturn str;\n}\n\n\n// See https://github.com/developit/preact/blob/master/src/util.js#L61\nexport function hashToClassName(c) {\n\tlet str = '';\n\tfor (let prop in c) {\n\t\tif (c[prop]) {\n\t\t\tif (str) str += ' ';\n\t\t\tstr += prop;\n\t\t}\n\t}\n\treturn str;\n}\n\n// Convert a JavaScript camel-case CSS property name to a CSS property name\nexport let jsToCss = memoize( s => s.replace(/([A-Z])/g,'-$1').toLowerCase() );\n\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn obj;\n}\n\nexport function getNodeProps(vnode) {\n\tlet defaultProps = vnode.nodeName.defaultProps,\n\t\tprops = assign({}, defaultProps || vnode.attributes);\n\tif (defaultProps) assign(props, vnode.attributes);\n\tif (vnode.children) props.children = vnode.children;\n\treturn props;\n}\n","import { objectKeys, encodeEntities, falsey, memoize, indent, isLargeString, styleObjToCss, hashToClassName, assign, getNodeProps } from './util';\n\nconst SHALLOW = { shallow: true };\n\n// components without names, kept as a hash for later comparison to return consistent UnnamedComponentXX names.\nconst UNNAMED = [];\n\nconst EMPTY = {};\n\nconst VOID_ELEMENTS = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n\n/** Render Preact JSX + Components to an HTML string.\n *\t@name render\n *\t@function\n *\t@param {VNode} vnode\tJSX VNode to render.\n *\t@param {Object} [context={}]\tOptionally pass an initial context object through the render path.\n *\t@param {Object} [options={}]\tRendering options\n *\t@param {Boolean} [options.shallow=false]\tIf `true`, renders nested Components as HTML elements (`<Foo a=\"b\" />`).\n *\t@param {Boolean} [options.xml=false]\t\tIf `true`, uses self-closing tags for elements without children.\n *\t@param {Boolean} [options.pretty=false]\t\tIf `true`, adds whitespace for readability\n */\nrenderToString.render = renderToString;\n\n\n/** Only render elements, leaving Components inline as `<ComponentName ... />`.\n *\tThis method is just a convenience alias for `render(vnode, context, { shallow:true })`\n *\t@name shallow\n *\t@function\n *\t@param {VNode} vnode\tJSX VNode to render.\n *\t@param {Object} [context={}]\tOptionally pass an initial context object through the render path.\n */\nlet shallowRender = (vnode, context) => renderToString(vnode, context, SHALLOW);\n\n\n/** The default export is an alias of `render()`. */\nexport default function renderToString(vnode, context, opts, inner, isSvgMode) {\n\tlet { nodeName, attributes, children } = vnode || EMPTY,\n\t\tisComponent = false;\n\tcontext = context || {};\n\topts = opts || {};\n\n\tlet pretty = opts.pretty,\n\t\tindentChar = typeof pretty==='string' ? pretty : '\\t';\n\n\tif (vnode==null || vnode===false) {\n\t\treturn '';\n\t}\n\n\t// #text nodes\n\tif (!nodeName) {\n\t\treturn encodeEntities(vnode);\n\t}\n\n\t// components\n\tif (typeof nodeName==='function') {\n\t\tisComponent = true;\n\t\tif (opts.shallow && (inner || opts.renderRootComponent===false)) {\n\t\t\tnodeName = getComponentName(nodeName);\n\t\t}\n\t\telse {\n\t\t\tlet props = getNodeProps(vnode),\n\t\t\t\trendered;\n\n\t\t\tif (!nodeName.prototype || typeof nodeName.prototype.render!=='function') {\n\t\t\t\t// stateless functional components\n\t\t\t\trendered = nodeName(props, context);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// class-based components\n\t\t\t\tlet c = new nodeName(props, context);\n\t\t\t\tc.props = props;\n\t\t\t\tc.context = context;\n\t\t\t\tif (c.componentWillMount) c.componentWillMount();\n\t\t\t\trendered = c.render(c.props, c.state, c.context);\n\n\t\t\t\tif (c.getChildContext) {\n\t\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn renderToString(rendered, context, opts, opts.shallowHighOrder!==false);\n\t\t}\n\t}\n\n\t// render JSX to HTML\n\tlet s = '', html;\n\n\tif (attributes) {\n\t\tlet attrs = objectKeys(attributes);\n\n\t\t// allow sorting lexicographically for more determinism (useful for tests, such as via preact-jsx-chai)\n\t\tif (opts && opts.sortAttributes===true) attrs.sort();\n\n\t\tfor (let i=0; i<attrs.length; i++) {\n\t\t\tlet name = attrs[i],\n\t\t\t\tv = attributes[name];\n\t\t\tif (name==='children') continue;\n\t\t\tif (!(opts && opts.allAttributes) && (name==='key' || name==='ref')) continue;\n\n\t\t\tif (name==='className') {\n\t\t\t\tif (attributes['class']) continue;\n\t\t\t\tname = 'class';\n\t\t\t}\n\t\t\telse if (isSvgMode && name.match(/^xlink\\:?(.+)/)) {\n\t\t\t\tname = name.toLowerCase().replace(/^xlink\\:?(.+)/, 'xlink:$1');\n\t\t\t}\n\n\t\t\tif (name==='class' && v && typeof v==='object') {\n\t\t\t\tv = hashToClassName(v);\n\t\t\t}\n\t\t\telse if (name==='style' && v && typeof v==='object') {\n\t\t\t\tv = styleObjToCss(v);\n\t\t\t}\n\n\t\t\tlet hooked = opts.attributeHook && opts.attributeHook(name, v, context, opts, isComponent);\n\t\t\tif (hooked || hooked==='') {\n\t\t\t\ts += hooked;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (name==='dangerouslySetInnerHTML') {\n\t\t\t\thtml = v && v.__html;\n\t\t\t}\n\t\t\telse if ((v || v===0 || v==='') && typeof v!=='function') {\n\t\t\t\tif (v===true || v==='') {\n\t\t\t\t\tv = name;\n\t\t\t\t\t// in non-xml mode, allow boolean attributes\n\t\t\t\t\tif (!opts || !opts.xml) {\n\t\t\t\t\t\ts += ' ' + name;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ts += ` ${name}=\"${encodeEntities(v)}\"`;\n\t\t\t}\n\t\t}\n\t}\n\n\t// account for >1 multiline attribute\n\tlet sub = s.replace(/^\\n\\s*/, ' ');\n\tif (sub!==s && !~sub.indexOf('\\n')) s = sub;\n\telse if (~s.indexOf('\\n')) s += '\\n';\n\n\ts = `<${nodeName}${s}>`;\n\n\tif (VOID_ELEMENTS.indexOf(nodeName)>-1) {\n\t\ts = s.replace(/>$/, ' />');\n\t}\n\n\tif (html) {\n\t\t// if multiline, indent.\n\t\tif (pretty && isLargeString(html)) {\n\t\t\thtml = '\\n' + indentChar + indent(html, indentChar);\n\t\t}\n\t\ts += html;\n\t}\n\telse {\n\t\tlet len = children && children.length,\n\t\t\tpieces = [],\n\t\t\thasLarge = ~s.indexOf('\\n');\n\t\tfor (let i=0; i<len; i++) {\n\t\t\tlet child = children[i];\n\t\t\tif (!falsey(child)) {\n\t\t\t\tlet childSvgMode = nodeName==='svg' ? true : nodeName==='foreignObject' ? false : isSvgMode,\n\t\t\t\t\tret = renderToString(child, context, opts, true, childSvgMode);\n\t\t\t\tif (!hasLarge && pretty && isLargeString(ret)) hasLarge = true;\n\t\t\t\tpieces.push(ret);\n\t\t\t}\n\t\t}\n\t\tif (hasLarge) {\n\t\t\tfor (let i=pieces.length; i--; ) {\n\t\t\t\tpieces[i] = '\\n' + indentChar + indent(pieces[i], indentChar);\n\t\t\t}\n\t\t}\n\t\tif (pieces.length) {\n\t\t\ts += pieces.join('');\n\t\t}\n\t\telse if (opts && opts.xml) {\n\t\t\treturn s.substring(0, s.length-1) + ' />';\n\t\t}\n\t}\n\n\tif (opts.jsx || VOID_ELEMENTS.indexOf(nodeName)===-1) {\n\t\tif (pretty && ~s.indexOf('\\n')) s += '\\n';\n\t\ts += `</${nodeName}>`;\n\t}\n\n\treturn s;\n}\n\nfunction getComponentName(component) {\n\tlet proto = component.prototype,\n\t\tctor = proto && proto.constructor;\n\treturn component.displayName || component.name || (proto && (proto.displayName || proto.name)) || getFallbackComponentName(component);\n}\n\nfunction getFallbackComponentName(component) {\n\tlet str = Function.prototype.toString.call(component),\n\t\tname = (str.match(/^\\s*function\\s+([^\\( ]+)/) || EMPTY)[1];\n\tif (!name) {\n\t\t// search for an existing indexed name for the given component:\n\t\tlet index = -1;\n\t\tfor (let i=UNNAMED.length; i--; ) {\n\t\t\tif (UNNAMED[i]===component) {\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t// not found, create a new indexed name:\n\t\tif (index<0) {\n\t\t\tindex = UNNAMED.push(component) - 1;\n\t\t}\n\t\tname = `UnnamedComponent${index}`;\n\t}\n\treturn name;\n}\nrenderToString.shallowRender = shallowRender;\n\n\nexport {\n\trenderToString as render,\n\trenderToString,\n\tshallowRender\n};\n"],"names":["NON_DIMENSION_PROPS","boxFlexGroup","columnCount","fillOpacity","flex","flexGrow","flexShrink","flexNegative","fontWeight","lineClamp","lineHeight","order","orphans","strokeOpacity","widows","zIndex","zoom","ESC","objectKeys","Object","keys","i","obj","hasOwnProperty","push","encodeEntities","String","s","replace","escapeChar","a","falsey","v","memoize","fn","mem","indent","char","isLargeString","length","ignoreLines","indexOf","styleObjToCss","str","prop","val","jsToCss","hashToClassName","c","toLowerCase","assign","props","getNodeProps","vnode","defaultProps","nodeName","attributes","children","SHALLOW","shallow","UNNAMED","EMPTY","VOID_ELEMENTS","renderToString","render","shallowRender","context","opts","inner","isSvgMode","pretty","indentChar","renderRootComponent","getComponentName","rendered","prototype","componentWillMount","state","getChildContext","shallowHighOrder","html","attrs","sortAttributes","sort","name","allAttributes","match","hooked","attributeHook","isComponent","__html","xml","sub","len","pieces","hasLarge","child","childSvgMode","ret","join","substring","jsx","component","proto","ctor","constructor","displayName","getFallbackComponentName","Function","toString","call","index"],"mappings":"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"}